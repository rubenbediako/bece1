import React from 'react';
import {
  Card,
  CardContent,
  CardActions,
  Typography,
  Button,
  Box,
  Chip,
  Paper
} from '@mui/material';
import { motion } from 'framer-motion';
import { BookOpen, Calculator, Globe, TestTube, Users, Languages } from 'lucide-react';
import type { Subject } from '../App';

interface SubjectSelectionProps {
  onSubjectSelect: (subject: Subject) => void;
}

const subjects: Subject[] = [
  {
    id: 'mathematics',
    name: 'Mathematics',
    description: 'Comprehensive NACCA JHS Mathematics curriculum coverage',
    topics: [
      'Standard Form', 'Fractions (BODMAS & Applications)', 'Percentages & Applications',
      'Algebra - Factorization & Expansion', 'Two Binomials', 'Algebraic Fractions',
      'Change of Subject', 'Variations', 'Equations & Applications', 'Inequalities & Applications',
      'Graph of Relations', 'Angles - Triangles & Quadrilaterals', 'Transversal Lines',
      'Area & Perimeter', 'Volume & Total Surface Area', 'Statistics (Mean, Mode, Median)',
      'Cumulative Frequency (Quartiles, Percentiles, Deciles)', 'Histogram (Mode)',
      'Probability', 'Bar Charts', 'Construction', 'Vectors', 'Coordinate Geometry',
      'Trigonometry', 'Transformations'
    ]
  },
  {
    id: 'english',
    name: 'English Language',
    description: 'Grammar, comprehension, composition, and literature',
    topics: ['Grammar', 'Comprehension', 'Essay Writing', 'Poetry', 'Letter Writing', 'Vocabulary']
  },
  {
    id: 'science',
    name: 'Integrated Science',
    description: 'Physics, Chemistry, and Biology fundamentals',
    topics: ['Physics', 'Chemistry', 'Biology', 'Scientific Method', 'Experiments', 'Environment']
  },
  {
    id: 'social-studies',
    name: 'Social Studies',
    description: 'History, geography, civics, and social awareness',
    topics: ['Ghana History', 'Geography', 'Government', 'Economics', 'Citizenship', 'Culture']
  },
  {
    id: 'french',
    name: 'French',
    description: 'French language skills and communication',
    topics: ['Grammar', 'Vocabulary', 'Conversation', 'Reading', 'Writing', 'Culture']
  },
  {
    id: 'ict',
    name: 'ICT',
    description: 'Information and Communication Technology',
    topics: ['Computer Basics', 'Internet', 'Software', 'Programming', 'Digital Literacy', 'Ethics']
  }
];

const getSubjectIcon = (subjectId: string) => {
  switch (subjectId) {
    case 'mathematics':
      return <Calculator size={32} />;
    case 'english':
      return <BookOpen size={32} />;
    case 'science':
      return <TestTube size={32} />;
    case 'social-studies':
      return <Globe size={32} />;
    case 'french':
      return <Languages size={32} />;
    case 'ict':
      return <Users size={32} />;
    default:
      return <BookOpen size={32} />;
  }
};

const SubjectSelection: React.FC<SubjectSelectionProps> = ({ onSubjectSelect }) => {
  return (
    <Box>
      <Paper elevation={1} sx={{ p: 3, mb: 4, textAlign: 'center', backgroundColor: 'primary.main', color: 'white' }}>
        <Typography variant="h3" gutterBottom fontWeight="bold">
          BECE 2026 Question Predictor
        </Typography>
        <Typography variant="h6" sx={{ opacity: 0.9 }}>
          Select a subject to start predicting exam questions
        </Typography>
        <Typography variant="body1" sx={{ mt: 2, opacity: 0.8 }}>
          Our AI analyzes past BECE patterns to predict likely questions for 2026
        </Typography>
      </Paper>

      <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: 3 }}>
        {subjects.map((subject, index) => (
          <motion.div
            key={subject.id}
            initial={{ opacity: 0, y: 50 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: index * 0.1 }}
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
          >
            <Card 
              sx={{ 
                height: '100%', 
                display: 'flex', 
                flexDirection: 'column',
                cursor: 'pointer',
                transition: 'all 0.3s ease',
                '&:hover': {
                  boxShadow: 6,
                  transform: 'translateY(-4px)'
                }
              }}
              onClick={() => onSubjectSelect(subject)}
            >
              <CardContent sx={{ flexGrow: 1, textAlign: 'center' }}>
                <Box sx={{ color: 'primary.main', mb: 2 }}>
                  {getSubjectIcon(subject.id)}
                </Box>
                <Typography variant="h5" component="h2" gutterBottom fontWeight="bold">
                  {subject.name}
                </Typography>
                <Typography variant="body2" color="text.secondary" paragraph>
                  {subject.description}
                </Typography>
                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, justifyContent: 'center' }}>
                  {subject.topics.slice(0, 3).map((topic) => (
                    <Chip 
                      key={topic} 
                      label={topic} 
                      size="small" 
                      variant="outlined"
                      color="primary"
                    />
                  ))}
                  {subject.topics.length > 3 && (
                    <Chip 
                      label={`+${subject.topics.length - 3} more`} 
                      size="small" 
                      variant="outlined"
                      color="secondary"
                    />
                  )}
                </Box>
              </CardContent>
              <CardActions sx={{ justifyContent: 'center', pb: 2 }}>
                <Button 
                  variant="contained" 
                  color="primary" 
                  size="large"
                  fullWidth
                  sx={{ mx: 2 }}
                >
                  Start Prediction
                </Button>
              </CardActions>
            </Card>
          </motion.div>
        ))}
      </Box>

      <Paper elevation={1} sx={{ p: 3, mt: 4, textAlign: 'center', backgroundColor: 'grey.50' }}>
        <Typography variant="h6" gutterBottom color="primary">
          ðŸŽ¯ Features
        </Typography>
        <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: 2, mt: 1 }}>
          <Box sx={{ textAlign: 'center' }}>
            <Typography variant="body1" fontWeight="bold">AI-Powered Predictions</Typography>
            <Typography variant="body2" color="text.secondary">
              Advanced algorithms analyze past papers
            </Typography>
          </Box>
          <Box sx={{ textAlign: 'center' }}>
            <Typography variant="body1" fontWeight="bold">Practice Mode</Typography>
            <Typography variant="body2" color="text.secondary">
              Test yourself with predicted questions
            </Typography>
          </Box>
          <Box sx={{ textAlign: 'center' }}>
            <Typography variant="body1" fontWeight="bold">Progress Tracking</Typography>
            <Typography variant="body2" color="text.secondary">
              Monitor your preparation progress
            </Typography>
          </Box>
        </Box>
      </Paper>
    </Box>
  );
};

export default SubjectSelection;
